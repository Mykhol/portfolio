---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const latestPost = posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())[0];
---

<Base>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <!-- Name + Role (spans 2 columns) -->
    <div class="md:col-span-2 bg-neutral-50 rounded-2xl p-8 border border-neutral-100">
      <h1 class="text-3xl font-bold tracking-tight">Michael Howell</h1>
      <p class="mt-2 text-neutral-500 text-lg">Software engineer, student, tinkerer</p>
    </div>

    <!-- Photo -->
    <div class="bg-neutral-50 rounded-2xl overflow-hidden border border-neutral-100">
      <img src="/headshot.jpg" alt="Michael Howell" class="w-full h-full object-cover" />
    </div>

    <!-- Currently -->
    <div class="bg-neutral-50 rounded-2xl p-6 border border-neutral-100">
      <p class="text-xs uppercase tracking-wide text-neutral-400 mb-2">Currently</p>
      <p class="text-sm text-neutral-700">Building emissions tooling at <a href="https://generatezero.co.nz" class="text-accent hover:underline" target="_blank" rel="noopener">Generate Zero</a></p>
    </div>

    <!-- Location -->
    <div class="bg-neutral-50 rounded-2xl p-6 border border-neutral-100">
      <p class="text-xs uppercase tracking-wide text-neutral-400 mb-2">Location</p>
      <p class="text-sm text-neutral-700">Auckland, New Zealand</p>
    </div>

    <!-- Education -->
    <div class="bg-neutral-50 rounded-2xl p-6 border border-neutral-100">
      <p class="text-xs uppercase tracking-wide text-neutral-400 mb-2">Education</p>
      <p class="text-sm text-neutral-700">Computer Systems Engineering<br/>University of Auckland</p>
    </div>

    <!-- Latest Post (spans 2 columns) -->
    {latestPost ? (
      <a href={`/blog/${latestPost.id}`} class="md:col-span-2 bg-neutral-50 rounded-2xl p-6 border border-neutral-100 hover:border-neutral-300 transition-colors block">
        <p class="text-xs uppercase tracking-wide text-neutral-400 mb-2">Latest writing</p>
        <p class="text-sm font-medium text-neutral-900">{latestPost.data.title}</p>
        <p class="text-xs text-neutral-400 mt-1">{latestPost.data.date.toLocaleDateString('en-NZ', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
      </a>
    ) : (
      <div class="md:col-span-2 bg-neutral-50 rounded-2xl p-6 border border-neutral-100">
        <p class="text-xs uppercase tracking-wide text-neutral-400 mb-2">Latest writing</p>
        <p class="text-sm text-neutral-400 italic">Coming soon</p>
      </div>
    )}

    <!-- Social Links -->
    <div class="bg-neutral-50 rounded-2xl p-6 border border-neutral-100">
      <p class="text-xs uppercase tracking-wide text-neutral-400 mb-3">Links</p>
      <div class="flex gap-4">
        <a href="https://github.com/Mykhol" target="_blank" rel="noopener" class="text-neutral-500 hover:text-neutral-900 transition-colors text-sm">GitHub</a>
        <a href="https://linkedin.com/in/michaelhowell" target="_blank" rel="noopener" class="text-neutral-500 hover:text-neutral-900 transition-colors text-sm">LinkedIn</a>
      </div>
    </div>
  </div>
</Base>
